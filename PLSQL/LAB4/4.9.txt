CREATE OR REPLACE PACKAGE BODY ALLOWANCE IS
FUNCTION EXPERIENCE(HIRE DATE) 
	RETURN NUMBER IS
	CURSOR C IS
	SELECT STAFF_CODE,HIREDATE FROM STAFF_MASTERS
	WHERE HIREDATE = HIRE;
	V_CODE STAFF_MASTERS.STAFF_CODE%TYPE;
	V_HIRE STAFF_MASTERS.HIREDATE%TYPE;
	V_EXP NUMBER;
BEGIN
	OPEN C;
	FETCH C INTO V_CODE,V_HIRE;
	V_EXP := ROUND((SYSDATE - HIREDATE)/365);
	CLOSE C;
	ALLOWANCE.SALARY(V_EXP,V_CODE);
	RETURN (V_EXP);
END EXPERIENCE;
PROCEDURE SALARY(EXP NUMBER,CODE NUMBER) IS
	CURSOR C IS
	SELECT STAFF_CODE,HIREDATE,STAFF_SAL
	FROM STAFF_MASTERS 
	WHERE STAFF_CODE = CODE;
	V_CODE STAFF_MASTERS.STAFF_CODE%TYPE;
	V_HIRE STAFF_MASTERS.HIREDATE%TYPE;
	V_SAL STAFF_MASTERS.STAFF_SAL%TYPE;
	V_ALLOWANCE NUMBER;
BEGIN
	OPEN C;
	FETCH C INTO V_CODE,V_HIRE,V_SAL;
	V_ALLOWANCE := EXP * 3000;
	INSERT INTO STAFF_ALLOWANCE VALUES(V_CODE,V_HIRE,EXP,
					   V_ALLOWANCE);
	CLOSE C;
END SALARY;
END ALLOWANCE;
/
